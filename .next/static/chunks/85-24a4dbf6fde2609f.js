(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{38490:function(e,n,t){"use strict";t.d(n,{v:function(){return i}}),t(67294);var r=t(8828),o=t(35944),i=function(e){var n=e.children,t=e.roles,i=(0,r.XC)().data;return i&&t.some(function(e){return i.roles.includes(e)})?(0,o.tZ)(o.HY,{children:n}):null}},38085:function(e,n,t){"use strict";t.d(n,{dA:function(){return eS},jU:function(){return eU},Sq:function(){return eq},DF:function(){return eZ},gH:function(){return eW},Ab:function(){return e0},Rf:function(){return ej}});var r=t(59499),o=t(4730),i=t(67294),c=t(5298),a=t(35944),u=["onFinish","children"];function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var l=function(e){var n=e.onFinish,t=e.children,r=(0,o.Z)(e,u),s=(0,i.useCallback)(function(e){var t=d({},e);null==n||n(t)},[n]);return(0,a.BX)(a.HY,{children:[" ",(0,a.tZ)(c.Z,d(d({name:"sound-info-form",layout:"vertical",onFinish:s},r),{},{children:t}))]})},p=t(75008),f=function(){return(0,a.tZ)(a.HY,{children:(0,a.tZ)(c.Z.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,a.tZ)(p.Z,{})})})},y=t(88484),g=t(2453),v=t(72708),b=t(71577);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var O=function(){return(0,a.tZ)(a.HY,{children:(0,a.tZ)(c.Z.Item,{name:"file",getValueFromEvent:function(e){return null==e?void 0:e.fileList[0].originFileObj},children:(0,a.tZ)(v.Z,h(h({},{beforeUpload:function(e){var n=["audio/mpeg","audio/wav"].includes(e.type);return n||g.ZP.error("".concat(e.type," is not a audio file")),n||v.Z.LIST_IGNORE}}),{},{maxCount:1,children:(0,a.tZ)(b.ZP,{icon:(0,a.tZ)(y.Z,{}),children:"Select File"})}))})})},Z=["onFinish","children"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){var n=e.onFinish,t=e.children,r=(0,o.Z)(e,Z),u=(0,i.useCallback)(function(e){var t=S({},e);null==n||n(t)},[n]);return(0,a.tZ)(c.Z,S(S({name:"sound-file-form",layout:"vertical",onFinish:u},r),{},{children:t}))},P=t(50029),T=t(16835),k=t(87794),C=t.n(k),x=t(3363),L=t(4034);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var D={name:"1u3ja41",styles:"margin-top:24px;display:flex;flex-direction:row-reverse"},N={name:"1u3ja41",styles:"margin-top:24px;display:flex;flex-direction:row-reverse"},A={name:"yz1nei",styles:"margin-top:16px"},I=function(e){var n,t,r=e.onFinish,o=e.type,c=(0,L.Y1)(),u=(0,T.Z)(c,2),s=u[0],d=u[1].isLoading,p=(0,L.Cp)(),y=(0,T.Z)(p,1)[0],g=(0,i.useState)(""),v=g[0],m=g[1],h=(0,i.useState)(0),Z=h[0],w=h[1],S=(0,i.useCallback)((n=(0,P.Z)(C().mark(function e(n){var t,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=F(F({},n),{},{type:o}),e.next=3,s({data:t});case 3:"data"in(r=e.sent)&&(m(r.data._id),w(Z+1));case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[s,Z,o]),k=(0,i.useCallback)((t=(0,P.Z)(C().mark(function e(n){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",n.file),e.next=4,y({id:v,data:t});case 4:"data"in e.sent&&r();case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[y,v,r]),E=[{title:"Information",content:(0,a.BX)(l,{onFinish:S,children:[(0,a.tZ)(f,{}),(0,a.tZ)("div",{css:D,children:(0,a.tZ)(b.ZP,{type:"primary",htmlType:"submit",loading:d,children:"Create"})})]})},{title:"Upload",content:(0,a.BX)(j,{onFinish:k,children:[(0,a.tZ)(O,{}),(0,a.tZ)("div",{css:N,children:(0,a.tZ)(b.ZP,{type:"primary",htmlType:"submit",loading:d,children:"Upload"})})]})}],I=E.map(function(e){return{key:e.title,title:e.title}});return(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.Z,{current:Z,items:I}),(0,a.tZ)("div",{css:A,children:E[Z].content})]})},B=t(89734),_=t.n(B),X=t(39205),M=t(42075),R=t(70149),V=t(37107),Y=t(38490),$=t(41248),q=t(31955),J=t(21255),H=t(18269),z=function(e){var n=e.id,t=(0,$.I0)(),r=q.Z.get(H._),o="".concat((0,V.L)(),"/sound/").concat(n,"/upload");return(0,a.tZ)(v.Z,{action:o,showUploadList:!1,maxCount:1,onChange:function(e){"done"===e.file.status&&t(J.e.util.invalidateTags([{type:J.$.TuneList},{type:J.$.SongList}]))},headers:{Authorization:"Bearer ".concat(r)},children:(0,a.tZ)(b.ZP,{icon:(0,a.tZ)(y.Z,{}),children:"Replace File"})})},U=t(64082),W=t(8473),G=v.Z.Dragger,Q={name:"4zleql",styles:"display:block"},K=function(e){var n=e.soundType,t=(0,$.I0)(),r="".concat((0,V.L)(),"/sound/upload/").concat(n);return(0,a.BX)(G,{action:r,onChange:function(e){var r=e.file,o=[];switch(n){case W.SoundType.Song:o=[{type:J.$.SongList}];break;case W.SoundType.Tune:o=[{type:J.$.TuneList}]}"done"===r.status&&t(J.e.util.invalidateTags(o))},accept:"audio/*",css:Q,headers:{Authorization:"Bearer ".concat(q.Z.get(H._))},multiple:!0,children:[(0,a.tZ)("p",{className:"ant-upload-drag-icon",children:(0,a.tZ)(U.Z,{})}),(0,a.tZ)("p",{className:"ant-upload-text",children:"Click or drag files to this area to upload"})]})},ee=function(e){switch(e){case W.SoundType.Song:return L.wi;case W.SoundType.Tune:return L.eW;default:throw Error("Invalid sound type")}},en=t(5737),et=function(e){var n=e.className,t=e.soundId,r=(0,L.z1)(),o=(0,T.Z)(r,1)[0];return(0,a.tZ)(en.Z,{className:n,title:"Delete the sound",description:"Are you sure to delete this sound?",onConfirm:function(){o({id:t,data:void 0})},okText:"Yes",cancelText:"No",children:(0,a.tZ)("a",{children:"Delete"})})},er=t(9443);function eo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ei(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eo(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ec=function(e){e.className;var n,t=e.sound,r=(0,i.useState)(!1),o=r[0],c=r[1],u=(0,L.bY)(),s=(0,T.Z)(u,2),d=s[0],p=s[1].isLoading,y=function(){return c(!1)},g=(n=(0,P.Z)(C().mark(function e(n){var r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ei(ei({},n),{},{priority:1}),e.next=3,d({id:t._id,data:r});case 3:"data"in e.sent&&y();case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),v=(0,i.useMemo)(function(){return{name:t.name}},[t]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("a",{onClick:function(){return c(!0)},children:"Edit"}),(0,a.tZ)(er.dy,{title:"Edit Sound",open:o,onClose:function(){return c(!1)},children:(0,a.BX)(l,{initialValues:v,onFinish:g,children:[(0,a.tZ)(f,{}),(0,a.BX)(er.dy.FooterActions,{children:[(0,a.tZ)(b.ZP,{onClick:y,disabled:p,children:"Cancel"}),(0,a.tZ)(b.ZP,{type:"primary",htmlType:"submit",loading:p,children:"Save"})]})]})})]})},ea=t(71338),eu=t(53575);function es(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ed(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?es(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):es(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var el={0:"0",50:"50",100:{style:{color:"#f50"},label:"100"}},ep={name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"},ef={name:"1d3w5wq",styles:"width:100%"},ey={name:"1mys3sh",styles:"margin-left:1rem"},eg=function(e){e.className;var n=e.soundData,t=(0,L.CR)(),r=(0,T.Z)(t,1)[0],o=(0,i.useState)(n.volume),c=o[0],u=o[1];return(0,i.useEffect)(function(){var e=setTimeout(function(){r({id:n._id,data:ed(ed({},n),{},{volume:c})})},500);return function(){return clearTimeout(e)}},[c]),(0,a.BX)("div",{css:ep,children:[(0,a.tZ)(ea.Z,{css:ef,defaultValue:50,onChange:function(e){u(e)},value:c,marks:el}),(0,a.tZ)("div",{css:ey,children:(0,a.tZ)(eu.Z,{count:c,color:"rgb(45, 183, 245)",showZero:!0})})]})},ev=X.Z.Title,eb=["Evac","Alert","Lockdown","Bell","Chime"],em=["Evac","Alert","Lockdown"],eh={name:"vgbo9k",styles:"display:flex;flex-direction:column;align-items:center;gap:0.5rem;@media (min-width: 1280px){flex-direction:row;}"},eO=[{title:"Name",dataIndex:"name",key:"name",width:"100px",render:function(e,n){return(0,a.BX)("div",{children:[(0,a.tZ)(ev,{level:4,children:e}),(0,a.BX)("div",{children:["ID: ",n._id]})]})}},{title:"Tune",dataIndex:"fileName",key:"fileName",width:"300px",render:function(e,n){return(0,a.BX)("div",{css:eh,children:[e&&(0,a.tZ)("audio",{src:"".concat((0,V.L)(),"/assets/audio/").concat(e),controls:!0}),em.includes(n.name)?(0,a.tZ)(Y.v,{roles:["master"],children:(0,a.tZ)(z,{id:n._id})}):(0,a.tZ)(z,{id:n._id})]})}},{title:"Volume",key:"volume",width:"200px",render:function(e,n){return(0,a.tZ)(eg,{soundData:n})}},{title:"Actions",key:"actions",width:"10%",render:function(e,n){return(0,a.tZ)(M.Z,{size:"small",children:!n.isDefault&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(ec,{sound:n})," ",(0,a.tZ)(et,{soundId:n._id})]})})}}],eZ=function(e){var n=e.className,t=e.titleExtra,r=ee(e.soundType)(void 0),o=r.data,c=r.isLoading,u=(0,i.useMemo)(function(){return _()(o,function(e){var n=eb.indexOf(e.name);return -1===n?eb.length:n})},[o]);return(0,a.tZ)(R.Z,{caption:t?(0,a.tZ)(M.Z,{children:t}):void 0,className:n,loading:c,columns:eO,dataSource:u,rowKey:function(e){return e._id}})},ew=t(51042),eS=function(e){var n=e.className,t=e.soundType,r=e.title,o=(0,i.useState)(!1),c=o[0],u=o[1],s=(0,i.useCallback)(function(){u(!0)},[]),d=(0,i.useCallback)(function(){u(!1)},[]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(b.ZP,{className:n,type:"primary",onClick:s,icon:(0,a.tZ)(ew.Z,{}),children:r}),(0,a.tZ)(er.dy,{title:r,open:c,onClose:d,destroyOnClose:!0,children:(0,a.tZ)(I,{type:t,onFinish:d})})]})},ej=function(e){var n=e.className,t=e.soundType,r=e.title,o=(0,i.useState)(!1),c=o[0],u=o[1],s=(0,i.useCallback)(function(){u(!0)},[]),d=(0,i.useCallback)(function(){u(!1)},[]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(b.ZP,{className:n,type:"primary",onClick:s,icon:(0,a.tZ)(ew.Z,{}),children:r}),(0,a.BX)(er.dy,{title:r,open:c,onClose:d,destroyOnClose:!0,children:[(0,a.tZ)(K,{soundType:t}),(0,a.tZ)(er.dy.FooterActions,{children:(0,a.tZ)(b.ZP,{onClick:d,children:"Cancel"})})]})]})},eP=t(13179),eT=t(71578),ek=t(10844),eC=t(38806),ex=t(1264),eL=t(53014),eE=function(){return(0,a.tZ)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4601 3.25C16.4601 4.35 15.5601 5.25 14.4601 5.25C13.3601 5.25 12.4601 4.35 12.4601 3.25C12.4601 2.15 13.3601 1.25 14.4601 1.25C15.5601 1.25 16.4601 2.15 16.4601 3.25ZM11.8601 14.75L11.2901 17.25C11.0501 18.31 10.0101 18.98 8.95011 18.77L4.84011 17.95C4.30011 17.84 3.95011 17.31 4.06011 16.77V16.73C4.17011 16.19 4.70011 15.84 5.24011 15.95L9.16011 16.75L10.7601 8.65L8.96011 9.35V11.75C8.96011 12.3 8.51011 12.75 7.96011 12.75C7.41011 12.75 6.96011 12.3 6.96011 11.75V9.38C6.96011 8.57 7.44011 7.85 8.18011 7.53L12.1601 5.85C12.3101 5.85 12.4351 5.825 12.5601 5.8C12.6851 5.775 12.8101 5.75 12.9601 5.75C13.6601 5.75 14.2601 6.15 14.6601 6.75L15.6601 8.35C16.3301 9.53 17.5901 10.43 19.1101 10.68C19.6001 10.76 19.9601 11.17 19.9601 11.66C19.9601 12.27 19.4201 12.75 18.8201 12.66C17.0801 12.38 15.5301 11.49 14.4601 10.25L13.8601 13.25L15.3401 14.66C15.7401 15.04 15.9601 15.56 15.9601 16.11V21.75C15.9601 22.3 15.5101 22.75 14.9601 22.75C14.4101 22.75 13.9601 22.3 13.9601 21.75V16.75L11.8601 14.75Z",fill:"#CC3939"})})};function eF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var eD=t(33957),eN=(0,eP.Z)("div",{target:"e1jncfg21"})(".btn-active{background-color:",function(e){var n=e.config;return"".concat(n.hoverBackgroundColor)},"!important;.btn-icon{transition:top 0.5s ease;background-color:",function(e){var n=e.config;return"".concat(n.backgroundColor)},";top:31px;}.tune-name{opacity:0;}}"),eA=(0,eP.Z)("div",{target:"e1jncfg20"})("position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.5rem;overflow:hidden;border-radius:1.5rem;border-width:2px;border-style:solid; transition:background-color 0.5s ease,border-color 0.5s ease;width:160px;height:110px;background-color:",function(e){var n=e.config;return"".concat(n.backgroundColor)},";border-color:",function(e){var n=e.config;return"".concat(n.backgroundColor)},";color:",function(e){var n=e.config;return"".concat(n.color)},";.circle1,.circle2,.circle3{animation:growAndFade 2s infinite ease-out;position:absolute;background-color:",function(e){var n=e.config;return"".concat(n.color)},";border-radius:50%;opacity:0;height:200px;width:200px;}.circle1{animation-delay:0s;}.circle2{animation-delay:0.5s;}.circle3{animation-delay:1s;}.btn-icon{position:absolute;border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:0.75rem; transition:background-color 0.5s ease,top 0.5s ease;top:20px;svg{width:20px;height:20px;}}.tune-name{transition:opacity 0.3s ease;font-weight:bold;opacity:1;margin-top:60px;}:hover{cursor:pointer;border-width:2px;border-style:solid; border-color:",function(e){var n=e.config;return"".concat(n.backgroundColor)},";background-color:",function(e){var n=e.config;return"".concat(n.hoverBackgroundColor)},";.btn-icon{background-color:",function(e){var n=e.config;return"".concat(n.backgroundColor)},";}}@keyframes growAndFade{0%{opacity:0.25;transform:scale(0);}100%{opacity:0;transform:scale(1);}}"),eI=function(e){var n,t=e.sound,r=e.config,o=e.isRepeat,i=(0,L.V4)(),c=(0,T.Z)(i,1)[0],u=(0,eD.M)(t._id);console.log("Sound ".concat(t.name," | id: ").concat(t._id," - playing: ").concat(null==u?void 0:u.isPlaying," - jobId: ").concat(t.jobId));var s=(null==u?void 0:u.isPlaying)!==void 0?u.isPlaying:!!t.jobId;return(0,a.tZ)(eN,{config:r,children:(0,a.BX)(eA,{config:r,className:s?"btn-active":"",onClick:function(){if(null!=t&&t.fileName){var e=s?W.SoundAction.Stop:W.SoundAction.Play;c({id:t._id,data:{action:e,isRepeat:!!o&&e===W.SoundAction.Play}})}},children:[s&&(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{className:"circle1"}),(0,a.tZ)("div",{className:"circle2"}),(0,a.tZ)("div",{className:"circle3"})]}),(n=r.icon,(0,a.tZ)(n,{className:"btn-icon"})),(0,a.tZ)("div",{className:"tune-name",children:t.name})]})})},eB={Bell:{backgroundColor:"#EEFFEC",hoverBackgroundColor:"#FAFFFA",color:"#45CC39",icon:eT.Z},Alert:{backgroundColor:"#FEF3E8",hoverBackgroundColor:"#FFFDFA",color:"#FF7F00",icon:ek.Z},Evac:{backgroundColor:"#FFECEC",hoverBackgroundColor:"#FFFAFA",color:"#CC3939",icon:function(e){return(0,a.tZ)(eL.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eF(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eF(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({component:eE},e))}},Lockdown:{backgroundColor:"#F4ECFF",hoverBackgroundColor:"#FCFAFF",color:"#7439CC",icon:eC.Z},Default:{backgroundColor:"#F2F2F2",hoverBackgroundColor:"#FFFFFF",color:"#333333",icon:ex.Z}},e_=["Evac","Alert","Lockdown"],eX=(0,eP.Z)("div",{target:"e1ee6m720"})({name:"vh84jn",styles:"border-radius:1.5rem;--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:24px;--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);"}),eM={name:"11en623",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center"},eR={name:"104upgs",styles:"margin-bottom:1rem;--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))"},eV={name:"f7ay7b",styles:"justify-content:center"},eY={name:"15kc9q",styles:"margin-bottom:1rem;margin-top:3.5rem;--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))"},e$={name:"f7ay7b",styles:"justify-content:center"},eq=function(e){var n=e.className,t=(0,L.eW)(void 0,{refetchOnMountOrArgChange:!0}).data;if(!(null!=t&&t.length))return null;var r=e_.map(function(e){return t.find(function(n){return n.name===e})}).filter(function(e){return!!e}),o=t.filter(function(e){return!e.isDefault}),i=t.find(function(e){return"Bell"===e.name});return i&&o.unshift(i),(0,a.BX)(eX,{className:n,css:eM,children:[(0,a.tZ)("span",{css:eR,children:"Emergency"}),(0,a.tZ)(M.Z,{wrap:!0,size:"large",css:eV,children:r.map(function(e){return(0,a.tZ)(eI,{sound:e,config:eB[e.name]||eB.Default,isRepeat:!0},e._id)})}),(0,a.tZ)("span",{css:eY,children:"Others"}),(0,a.tZ)(M.Z,{wrap:!0,size:"large",css:e$,children:o.map(function(e){return(0,a.tZ)(eI,{sound:e,config:eB[e.name]||eB.Default},e._id)})})]})},eJ=t(54689);function eH(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ez(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eH(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eH(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eU=function(e){var n,t=(0,L.kd)(),r=(0,T.Z)(t,1)[0],o=eJ.Z.useNotification(),i=(0,T.Z)(o,2),c=i[0],u=i[1],s=(n=(0,P.Z)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:"data"in e.sent&&c.success({message:"Reset Tunes",description:"Reset tunes successfully"});case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,a.BX)(a.HY,{children:[u,(0,a.tZ)(en.Z,{title:"Reset all tunes",description:"Are you sure to reset all tunes?",onConfirm:s,okText:"Yes",cancelText:"No",children:(0,a.tZ)(b.ZP,ez(ez({danger:!0},e),{},{children:"Reset Tunes"}))})]})},eW=function(e){var n=e.soundId,t=e.className,r=(0,L.wi)().data,o=(0,L.eW)().data,i=(null==r?void 0:r.find(function(e){return e._id===n}))||(null==o?void 0:o.find(function(e){return e._id===n}));return i?(0,a.tZ)("span",{className:t,children:i.name}):null},eG=function(e){var n=(0,i.useState)(!1),t=n[0],r=n[1],o=(0,i.useMemo)(function(){if(!e)return null;var n=new Audio(e);return n.onended=function(){return r(!1)},n},[e]);return(0,i.useEffect)(function(){t?null==o||o.play():null==o||o.pause()},[o,t]),[t,function(){return r(!t)}]},eQ=["soundName","className"];function eK(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var e0=function(e){var n,t=e.soundName,c=e.className,u=(0,o.Z)(e,eQ),s=ee(W.SoundType.Tune)(),d=s.data,l=s.isLoading,p=(0,i.useMemo)(function(){return null==d?void 0:d.find(function(e){return e.name===t})},[d,t]),f=eG(p?"".concat((0,V.L)(),"/assets/audio/").concat(p.fileName):void 0),y=(0,T.Z)(f,2),g=y[0],v=y[1],m=(0,L.V4)(),h=(0,T.Z)(m,1)[0],O=(n=(0,P.Z)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h({id:p._id,data:{action:W.SoundAction.Play,isRepeat:!1}});case 4:v();case 5:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,a.tZ)(b.ZP,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eK(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eK(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({className:"SoundPlayerButton ".concat(void 0===c?"":c),loading:g||l,onClick:O},u))}},33957:function(e,n,t){"use strict";t.d(n,{M:function(){return s}});var r=t(18446),o=t.n(r),i=t(23279),c=t.n(i),a=t(67294),u=t(37644),s=function(e){var n=(0,a.useState)(null),t=n[0],r=n[1];return(0,a.useEffect)(function(){var n=c()(function(e){r(e)},300),i=function(r){if(r instanceof CustomEvent){var i=r.detail;(null==i?void 0:i.id)!==e||o()(i,t)||(console.log("payload: ",i),n(i))}};return window.addEventListener(u.w.Playing,i),function(){window.removeEventListener(u.w.Playing,i)}},[t,e]),t}},4034:function(e,n,t){"use strict";t.d(n,{Y1:function(){return c},z1:function(){return u},wi:function(){return p},eW:function(){return d},kd:function(){return O},V4:function(){return y},bY:function(){return v},CR:function(){return w},Cp:function(){return m}});var r=t(21255),o=t(13306),i=r.e.injectEndpoints({endpoints:function(e){return{createSound:e.mutation({query:function(e){var n=e.data;return o.dJ.post("/sound",{data:n})},invalidatesTags:function(){return[{type:r.$.TuneList,id:"LIST"},{type:r.$.SongList,id:"LIST"}]}})}}}),c=i.useCreateSoundMutation;i.endpoints.createSound;var a=r.e.injectEndpoints({endpoints:function(e){return{deleteSound:e.mutation({query:function(e){var n=e.id;return e.data,o.dJ.delete("/sound/".concat(n))},invalidatesTags:function(){return[{type:r.$.TuneList,id:"LIST"},{type:r.$.SongList,id:"LIST"}]}})}}}),u=a.useDeleteSoundMutation;a.endpoints.deleteSound;var s=r.e.injectEndpoints({endpoints:function(e){return{getTunes:e.query({query:function(){return o.dJ.get("/sound/tunes")},providesTags:function(){return[{type:r.$.TuneList,id:"LIST"}]}})}}}),d=s.useGetTunesQuery;s.endpoints.getTunes;var l=r.e.injectEndpoints({endpoints:function(e){return{getSongs:e.query({query:function(){return o.dJ.get("/sound/songs")},providesTags:function(){return[{type:r.$.SongList,id:"LIST"}]}})}}}),p=l.useGetSongsQuery;l.endpoints.getSongs;var f=r.e.injectEndpoints({endpoints:function(e){return{toggleSound:e.mutation({query:function(e){var n=e.id,t=e.data;return o.dJ.post("/sound/".concat(n,"/").concat(t.action),{params:{repeat:t.isRepeat}})},invalidatesTags:function(){return[{type:r.$.TuneList,id:"LIST"},{type:r.$.SongList,id:"LIST"}]}})}}}),y=f.useToggleSoundMutation;f.endpoints.toggleSound;var g=r.e.injectEndpoints({endpoints:function(e){return{updateSound:e.mutation({query:function(e){var n=e.id,t=e.data;return o.dJ.patch("/sound/".concat(n),{data:t})},invalidatesTags:function(){return[{type:r.$.TuneList,id:"LIST"},{type:r.$.SongList,id:"LIST"}]}})}}}),v=g.useUpdateSoundMutation;g.endpoints.updateSound;var b=r.e.injectEndpoints({endpoints:function(e){return{uploadSound:e.mutation({query:function(e){var n=e.id,t=e.data;return o.dJ.post("/sound/".concat(n,"/upload"),{data:t})},invalidatesTags:function(){return[{type:r.$.TuneList,id:"LIST"},{type:r.$.SongList,id:"LIST"}]}})}}}),m=b.useUploadSoundMutation;b.endpoints.uploadSound;var h=r.e.injectEndpoints({endpoints:function(e){return{resetTunes:e.mutation({query:function(){return o.dJ.post("/sound/resetTunes")},invalidatesTags:[{type:r.$.TuneList,id:"LIST"}]})}}}),O=h.useResetTunesMutation;h.endpoints.resetTunes;var Z=r.e.injectEndpoints({endpoints:function(e){return{updateVolume:e.mutation({query:function(e){var n=e.id,t=e.data;return o.dJ.patch("/sound/".concat(n,"/volume"),{data:t})},invalidatesTags:function(){return[{type:r.$.TuneList,id:"LIST"},{type:r.$.SongList,id:"LIST"}]}})}}}),w=Z.useUpdateVolumeMutation;Z.endpoints.updateVolume},71304:function(){},37644:function(e,n,t){"use strict";var r;t.d(n,{w:function(){return r}}),(r||(r={})).Playing="playing"},68578:function(e,n,t){"use strict";t.d(n,{SocketEvent:function(){return o.V},SocketType:function(){return o.d}});var r=t(71304);t.o(r,"JobType")&&t.d(n,{JobType:function(){return r.JobType}}),t.o(r,"PlaylistOperation")&&t.d(n,{PlaylistOperation:function(){return r.PlaylistOperation}}),t.o(r,"SocketEvent")&&t.d(n,{SocketEvent:function(){return r.SocketEvent}}),t.o(r,"SocketType")&&t.d(n,{SocketType:function(){return r.SocketType}}),t.o(r,"SoundAction")&&t.d(n,{SoundAction:function(){return r.SoundAction}}),t.o(r,"SoundType")&&t.d(n,{SoundType:function(){return r.SoundType}});var o=t(38962)},38962:function(e,n,t){"use strict";var r,o,i,c;t.d(n,{V:function(){return r},d:function(){return o}}),(i=r||(r={})).Playing="playing",i.Connect="connect",i.ServerPeerId="serverPeerId",(c=o||(o={})).Client="client",c.Server="server"},8473:function(e,n,t){"use strict";t.d(n,{JobType:function(){return o.O},PlaylistOperation:function(){return i.If},SocketEvent:function(){return r.SocketEvent},SocketType:function(){return r.SocketType},SoundAction:function(){return i.kY},SoundType:function(){return i.k6}});var r=t(68578);t.o(r,"JobType")&&t.d(n,{JobType:function(){return r.JobType}}),t.o(r,"PlaylistOperation")&&t.d(n,{PlaylistOperation:function(){return r.PlaylistOperation}}),t.o(r,"SoundAction")&&t.d(n,{SoundAction:function(){return r.SoundAction}}),t.o(r,"SoundType")&&t.d(n,{SoundType:function(){return r.SoundType}});var o=t(12441),i=t(47815)},12441:function(e,n,t){"use strict";var r,o,i,c;t.d(n,{O:function(){return o}}),(i=r||(r={}))[i.Sunday=0]="Sunday",i[i.Monday=1]="Monday",i[i.Tuesday=2]="Tuesday",i[i.Wednesday=3]="Wednesday",i[i.Thursday=4]="Thursday",i[i.Friday=5]="Friday",i[i.Saturday=6]="Saturday",(c=o||(o={})).PlaySound="PlaySound",c.PlayMusic="PlayMusic",c.PlayVoiceRecorded="PlayVoiceRecorded",c.PlayTextToAudio="PlayTextToAudio"},47815:function(e,n,t){"use strict";var r,o,i,c,a,u;t.d(n,{If:function(){return i},kY:function(){return o},k6:function(){return r}}),(c=r||(r={})).Song="Song",c.Tune="Tune",(a=o||(o={})).Play="play",a.Stop="stop",(u=i||(i={})).Play="play",u.Stop="stop"}}]);