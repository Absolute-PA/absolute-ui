"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{91114:function(e,t,n){n.d(t,{vU:function(){return _},xF:function(){return A},ol:function(){return T}});var r=n(59499),i=n(4730),s=n(5022),o=n(75008),c=n(5298),a=n(26343),u=n(35944),l=["editing","dataIndex","title","inputType","record","index","children","form"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}s.Z.Option;var f=function(e){var t=e.editing,n=e.dataIndex,r=e.title,d=e.inputType,f=(e.record,e.index,e.children),m=e.form,Z=(0,i.Z)(e,l),h="multi-select"===d?(0,u.tZ)(s.Z,{mode:"multiple",placeholder:"Please select",onChange:function(e){m.setFieldsValue({roles:e})},options:a.l}):(0,u.tZ)(o.Z,{});return(0,u.tZ)("td",p(p({},Z),{},{children:t?(0,u.tZ)(c.Z.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(r,"!")}],children:h}):f}))},m=n(27812),Z=n(50029),h=n(16835),w=n(87794),y=n.n(w),P=n(67294),g=n(2453),b=n(39205),v=n(5737),O=n(42075),x=n(71577),k=n(70149),j=n(59309),C=n(20990),S=n(96807);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=function(e){var t,n,r,i=e.users.map(function(e){return{key:e.email,email:e.email,username:e.username,roles:e.roles,id:e.id}}),s=c.Z.useForm(),o=(0,h.Z)(s,1)[0],a=(0,P.useState)(i),l=a[0],d=a[1],p=(0,P.useState)(""),w=p[0],I=p[1],T=(0,j.kD)(),B=(0,h.Z)(T,2),D=B[0];B[1].isSuccess;var N=(0,C.I1)(),F=(0,h.Z)(N,2),U=F[0];F[1].isSuccess;var V=(0,S.PI)(),X=(0,h.Z)(V,2),A=X[0];X[1].isSuccess;var R=function(e){return e.email===w},Y=function(e){o.setFieldsValue(E({},e)),e.email&&I(e.email)},_=(t=(0,Z.Z)(y().mark(function e(t){var n,r,i,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.validateFields();case 3:n=e.sent,(i=(r=(0,m.Z)(l)).findIndex(function(e){return t===e.email}))>-1?(s=E(E({},r[i]),n),r.splice(i,1,s),d(r),D(s).unwrap().then(function(e){g.ZP.success("Success update user"),I("")}).catch(function(){return g.ZP.error("Something is wrong")})):(r.push(n),d(r),I("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return t.apply(this,arguments)}),q=function(){I("")},H=(n=(0,Z.Z)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:U(t).unwrap().then(function(){g.ZP.success("Success delete user")}).catch(function(){return g.ZP.error("Something is wrong")});case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),z=(r=(0,Z.Z)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:e.sent.isSuccess?g.ZP.success("Success reset password user. Please use the default password to login."):g.ZP.error("Something is wrong");case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),L=function(){},W=function(){},G=[{title:"Username",dataIndex:"username",key:"username"},{title:"Email",dataIndex:"email",key:"email"},{title:"Roles",dataIndex:"roles",key:"roles",render:function(e){return e.map(function(e){return(0,u.tZ)("p",{children:e},e)})}},{title:"Actions",key:"actions",dataIndex:"actions",render:function(e,t){return R(t)?(0,u.BX)("span",{children:[(0,u.tZ)(b.Z.Link,{onClick:function(){return _(t.email)},style:{marginRight:8},children:"Save"}),(0,u.tZ)(v.Z,{title:"Sure to cancel?",onConfirm:q,children:(0,u.tZ)("a",{children:"Cancel"})})]}):(0,u.BX)(O.Z,{size:"middle",children:[(0,u.tZ)(v.Z,{title:"Delete the user",description:"Are you sure to delete this user?",onConfirm:function(){return H(t.id)},onCancel:L,okText:"Yes",cancelText:"No",children:(0,u.tZ)(x.ZP,{type:"link",children:"Delete"})}),(0,u.tZ)(x.ZP,{type:"link",onClick:function(){return Y(E(E({},t),{},{key:t.email}))},children:"Edit"}),(0,u.tZ)(v.Z,{title:"Reset password",description:"Are you sure to reset password for this user?",onConfirm:function(){return z(t.id)},onCancel:W,okText:"Yes",cancelText:"No",children:(0,u.tZ)(x.ZP,{type:"link",children:"Reset Password"})})]})}}].map(function(e){return["actions"].includes(e.key)?e:E(E({},e),{},{onCell:function(t){return{record:t,inputType:"roles"===e.dataIndex?"multi-select":"text",dataIndex:e.dataIndex,title:e.title||"",editing:R(t),form:o}}})});return(0,u.tZ)(u.HY,{children:(0,u.tZ)(c.Z,{form:o,component:!1,children:(0,u.tZ)(k.Z,{scroll:{x:"max-content"},components:{body:{cell:f}},bordered:!0,dataSource:l,columns:G,rowClassName:"editable-row",pagination:{onChange:q}})})})},B=n(75081),D=n(94149),N=n(87547),F=n(9443),U=n(8828),V={name:"1j389vi",styles:"font-weight:700"},X={name:"1j389vi",styles:"font-weight:700"},A=(0,F.h4)(function(e){var t,n=e.className,r=e.header,i=(0,P.useContext)(F.j8),s=i.isEditing,a=i.setEditing,l=(0,U.XC)().data,d=c.Z.useForm(),p=(0,h.Z)(d,1)[0],f=(0,U.We)(),m=(0,h.Z)(f,1)[0],w=(t=(0,Z.Z)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:"data"in e.sent&&(g.ZP.success("Updated password successfully."),a(!1));case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return(0,u.BX)(F.Uf,{className:n,header:r||"User",icon:(0,u.tZ)(N.Z,{}),defaultActive:!0,children:[!l&&(0,u.tZ)(B.Z,{}),!!l&&(0,u.BX)(u.HY,{children:[(0,u.tZ)(F.Uf.EditButton,{onClick:function(){return a(!s)}}),(0,u.BX)(F.Tr,{form:p,initialValues:l,onFinish:w,children:[(0,u.BX)(F.Tr.Row,{children:[(0,u.tZ)(F.Tr.Item,{name:["username"],label:"User name",isEditing:!1,children:(0,u.tZ)(o.Z,{})}),(0,u.tZ)(F.Tr.Item,{name:["email"],label:"Email",isEditing:!1,children:(0,u.tZ)(o.Z,{})}),(0,u.tZ)(F.Tr.Item,{name:["newPassword"],label:"New Password",rules:[{required:!0}],renderViewValue:function(){return(0,u.tZ)("div",{css:V,children:"********"})},children:(0,u.tZ)(o.Z.Password,{prefix:(0,u.tZ)(D.Z,{}),type:"password",placeholder:"New Password"})}),(0,u.tZ)(F.Tr.Item,{name:["confirmPassword"],dependencies:["newPassword"],label:"Confirm Password",renderViewValue:function(){return(0,u.tZ)("div",{css:X,children:"********"})},rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("newPassword")!==n?Promise.reject(Error("The new password that you entered do not match!")):Promise.resolve()}}}],children:(0,u.tZ)(o.Z.Password,{prefix:(0,u.tZ)(D.Z,{}),type:"password",placeholder:"Confirm Password"})})]}),s&&(0,u.tZ)(F.Uf.FooterActions,{children:(0,u.tZ)(F.Tr.Actions,{})})]})]})]})}),R=n(51042),Y=n(68146),_=function(e){var t=e.className,n=(0,P.useState)(!1),r=n[0],i=n[1];return(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.ZP,{className:t,type:"primary",onClick:function(){return i(!0)},icon:(0,u.tZ)(R.Z,{}),children:"Create User"}),(0,u.tZ)(F.dy,{title:"Create new user",open:r,onClose:function(){return i(!1)},destroyOnClose:!0,children:(0,u.tZ)(Y.B2,{title:"none",hasSpacing:!1,hasBlockBtn:!1,confirmBtnPosition:"right"})})]})}}}]);