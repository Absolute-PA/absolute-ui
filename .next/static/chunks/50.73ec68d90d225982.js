(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{98698:function(n,e,t){"use strict";t.r(e),t.d(e,{RecordReceive:function(){return a},default:function(){return d}});var o=t(67294),r=t(70766),u=t(63444),c=t(8473),i=t(7621),s=t(35944),l=function(n){var e=n.peerId,t=n.isConnected,o=n.peer,r=n.call;return(0,s.tZ)("div",{children:(0,s.tZ)("div",{children:(0,s.BX)("div",{children:["Peer id: ",e,(0,s.BX)("div",{children:["Is connected ",t?"yes":"no"]}),(0,s.tZ)("button",{id:"stopRecord",onClick:function(){null==o||o.disconnect()},children:"Destroy Peer"}),(0,s.tZ)("button",{id:"startRecord",onClick:function(){null==r||r.close()},children:"Stop Playing Sound"})]})})})},a=function(){var n=(0,o.useRef)(new Audio),e=(0,o.useState)(""),t=e[0],a=e[1],d=(0,o.useState)(!1),f=d[0],y=d[1],S=(0,o.useState)(!1),p=S[0],v=S[1],k=(0,o.useState)(),T=k[0],P=k[1],h=(0,u.s)(c.SocketType.Server),_=(0,i.r)(),E=(0,o.useCallback)(function(n){if(n&&_){console.log("initializePeer");var e=function(e){console.log("emit serverPeerId"),n.emit("serverPeerId",e)};_.on("open",function(n){console.log("My peer ID is: "+n),a(n),e(n)}),_.on("error",function(n){console.error(n)}),_.on("call",function(n){console.log("Receive a call"),f||(v(!0),y(!0),n.answer(),P(n),n.on("stream",r.n),n.on("close",function(){console.log("Close the call"),y(!1)}))})}},[f,h]);return null==h||h.on("volumeChange",function(e){n.current.volume=e/100}),(0,o.useEffect)(function(){h&&h.on("reconnectPeerjs",function(){if(!t)return E(h);h.emit("serverPeerId",t)})},[E,h,t]),(0,o.useEffect)(function(){E(h)},[E,h]),(0,s.BX)("div",{children:[(0,s.tZ)("h2",{children:"Server Peer"}),(0,s.tZ)(l,{peerId:t,isConnected:p,peer:_,call:T}),(0,s.tZ)("audio",{controls:!0,id:"audioPlay",ref:n})]})},d=a},7621:function(n,e,t){"use strict";t.d(e,{r:function(){return u}});var o=t(10698),r=t(67294),u=function(){var n=(0,r.useState)(null),e=n[0],t=n[1];return(0,r.useEffect)(function(){console.log("true","process.env.NEXT_PUBLIC_HTTPS");var n=window.location.hostname,e=new o.ZP({host:n||"localhost",port:Number(window.__ENV.NEXT_PUBLIC_SERVER_PORT||8080),path:"/peer/streaming",debug:3,secure:!0});return t(e),function(){null==e||e.destroy()}},[]),e}},63444:function(n,e,t){"use strict";t.d(e,{s:function(){return c}});var o=t(67294),r=t(70766),u={},c=function(n){var e=(0,o.useState)(null),t=e[0],c=e[1];return(0,o.useEffect)(function(){var e=u[n];if(e){c(e.getSocket());return}var t=new r.C({name:n});return u[n]=t,c(t.getSocket()),function(){t.close()}},[n]),t}},71304:function(){},68578:function(n,e,t){"use strict";t.d(e,{SocketEvent:function(){return r.V},SocketType:function(){return r.d}});var o=t(71304);t.o(o,"JobType")&&t.d(e,{JobType:function(){return o.JobType}}),t.o(o,"PlaylistOperation")&&t.d(e,{PlaylistOperation:function(){return o.PlaylistOperation}}),t.o(o,"SocketEvent")&&t.d(e,{SocketEvent:function(){return o.SocketEvent}}),t.o(o,"SocketType")&&t.d(e,{SocketType:function(){return o.SocketType}}),t.o(o,"SoundAction")&&t.d(e,{SoundAction:function(){return o.SoundAction}}),t.o(o,"SoundType")&&t.d(e,{SoundType:function(){return o.SoundType}});var r=t(38962)},38962:function(n,e,t){"use strict";var o,r,u,c;t.d(e,{V:function(){return o},d:function(){return r}}),(u=o||(o={})).Playing="playing",u.Connect="connect",u.ServerPeerId="serverPeerId",(c=r||(r={})).Client="client",c.Server="server"},8473:function(n,e,t){"use strict";t.d(e,{JobType:function(){return r.O},PlaylistOperation:function(){return u.If},SocketEvent:function(){return o.SocketEvent},SocketType:function(){return o.SocketType},SoundAction:function(){return u.kY},SoundType:function(){return u.k6}});var o=t(68578);t.o(o,"JobType")&&t.d(e,{JobType:function(){return o.JobType}}),t.o(o,"PlaylistOperation")&&t.d(e,{PlaylistOperation:function(){return o.PlaylistOperation}}),t.o(o,"SoundAction")&&t.d(e,{SoundAction:function(){return o.SoundAction}}),t.o(o,"SoundType")&&t.d(e,{SoundType:function(){return o.SoundType}});var r=t(12441),u=t(47815)},12441:function(n,e,t){"use strict";var o,r,u,c;t.d(e,{O:function(){return r}}),(u=o||(o={}))[u.Sunday=0]="Sunday",u[u.Monday=1]="Monday",u[u.Tuesday=2]="Tuesday",u[u.Wednesday=3]="Wednesday",u[u.Thursday=4]="Thursday",u[u.Friday=5]="Friday",u[u.Saturday=6]="Saturday",(c=r||(r={})).PlaySound="PlaySound",c.PlayMusic="PlayMusic",c.PlayVoiceRecorded="PlayVoiceRecorded",c.PlayTextToAudio="PlayTextToAudio"},47815:function(n,e,t){"use strict";var o,r,u,c,i,s;t.d(e,{If:function(){return u},kY:function(){return r},k6:function(){return o}}),(c=o||(o={})).Song="Song",c.Tune="Tune",(i=r||(r={})).Play="play",i.Stop="stop",(s=u||(u={})).Play="play",s.Stop="stop"},70766:function(n,e,t){"use strict";t.d(e,{C:function(){return l},n:function(){return o}});var o=function(n){var e=document.querySelector("#audioPlay");e&&(e.srcObject=n,e.addEventListener("canplay",function(){setTimeout(function(){null==e||e.play().catch(function(n){return console.error(n)})},10)}))},r=t(92777),u=t(82262),c=t(59499),i=t(9367),s=t(37107),l=function(){function n(e){(0,r.Z)(this,n),(0,c.Z)(this,"_socket",null),(0,c.Z)(this,"_query",void 0),this._query=e,this.init()}return(0,u.Z)(n,[{key:"init",value:function(){if(!this._socket){var n=(0,s.L)();this._socket=(0,i.io)(n,{query:this._query})}}},{key:"getSocket",value:function(){return this._socket||this.init(),this._socket}},{key:"close",value:function(){this._socket&&(this._socket.close(),this._socket=null)}}]),n}()}}]);